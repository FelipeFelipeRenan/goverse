basePath: /
definitions:
  doc_generators.AddMemberRequest:
    properties:
      role:
        example: member
        type: string
      user_id:
        example: a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a12
        type: string
    required:
    - user_id
    type: object
  doc_generators.CreateRoomRequest:
    properties:
      description:
        example: Sala para jogar.
        type: string
      is_public:
        example: true
        type: boolean
      max_members:
        example: 50
        type: integer
      name:
        example: Minha Sala de Jogos
        type: string
    required:
    - name
    type: object
  doc_generators.CreateUserRequest:
    properties:
      email:
        example: novo@email.com
        type: string
      password:
        example: senha123
        type: string
      username:
        example: novo_usuario
        type: string
    type: object
  doc_generators.LoginRequest:
    properties:
      email:
        example: admin@goverse.com
        type: string
      password:
        example: senha123
        type: string
      type:
        example: password
        type: string
    type: object
  doc_generators.LoginResponse:
    properties:
      csrf_token:
        example: a1b2c3d4-...
        type: string
      user:
        $ref: '#/definitions/doc_generators.UserResponse'
    type: object
  doc_generators.MemberWithUser:
    properties:
      joined_at:
        type: string
      role:
        example: owner
        type: string
      room_id:
        example: c0eebc99-9c0b-4ef8-bb6d-6bb9bd380b11
        type: string
      user:
        $ref: '#/definitions/doc_generators.UserResponse'
    type: object
  doc_generators.RoomResponse:
    properties:
      created_at:
        type: string
      description:
        example: Sala pública para todos.
        type: string
      id:
        example: c0eebc99-9c0b-4ef8-bb6d-6bb9bd380b11
        type: string
      is_public:
        example: true
        type: boolean
      max_members:
        example: 100
        type: integer
      member_count:
        example: 1
        type: integer
      name:
        example: Sala Geral
        type: string
      owner_id:
        example: a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11
        type: string
      updated_at:
        type: string
    type: object
  doc_generators.UpdateRoleRequest:
    properties:
      new_role:
        example: admin
        type: string
    required:
    - new_role
    type: object
  doc_generators.UpdateRoomRequest:
    properties:
      description:
        example: Novo foco.
        type: string
      is_public:
        example: false
        type: boolean
      max_members:
        example: 10
        type: integer
      name:
        example: Sala de Estudos
        type: string
    type: object
  doc_generators.UpdateUserRequest:
    properties:
      picture:
        example: http://.../img.png
        type: string
      username:
        example: Novo Nome
        type: string
    type: object
  doc_generators.UserResponse:
    properties:
      created_at:
        type: string
      email:
        example: admin@goverse.com
        type: string
      id:
        example: a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11
        type: string
      is_oauth:
        type: boolean
      picture:
        type: string
      username:
        example: Admin Goverse
        type: string
    type: object
host: localhost
info:
  contact:
    email: feliperenanqwerty@gmail.com
    name: Felipe Renan
  description: Documentação unificada dos microsserviços do Goverse.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Goverse API (Unificada)
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Realiza login com email e senha. Salva os cookies 'access_token'
        (HttpOnly) e 'csrf_token' (JS-readable) no navegador.
      parameters:
      - description: Credenciais de login
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/doc_generators.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Retorna o usuário e o token CSRF
          schema:
            $ref: '#/definitions/doc_generators.LoginResponse'
        "401":
          description: Credenciais inválidas
          schema:
            type: string
      summary: Login (Obter Cookies)
      tags:
      - Auth
  /auth/logout:
    post:
      description: Limpa os cookies 'access_token' and 'csrf_token' do navegador.
      produces:
      - application/json
      responses:
        "200":
          description: Logout bem-sucedido
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Logout (Limpar Cookies)
      tags:
      - Auth
  /auth/me:
    get:
      description: Retorna os dados do usuário associado ao cookie 'access_token'.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/doc_generators.UserResponse'
        "401":
          description: Não autorizado
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Obter dados do usuário logado
      tags:
      - Auth
  /rooms:
    get:
      description: Retorna uma lista de salas. Por padrão, apenas salas públicas.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/doc_generators.RoomResponse'
            type: array
      summary: Listar salas (Público)
      tags:
      - Room
    post:
      consumes:
      - application/json
      description: Cria uma nova sala. O usuário logado será o 'owner'.
      parameters:
      - description: Dados da nova sala
        in: body
        name: room
        required: true
        schema:
          $ref: '#/definitions/doc_generators.CreateRoomRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/doc_generators.RoomResponse'
        "400":
          description: Dados inválidos
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Criar nova sala
      tags:
      - Room
  /rooms/{id}:
    delete:
      description: Exclui uma sala. Requer ser o 'owner' da sala.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: Sala excluída
          schema:
            type: string
        "404":
          description: Sala não encontrada
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Excluir sala
      tags:
      - Room
    get:
      description: Retorna detalhes de uma sala específica. Requer autenticação.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/doc_generators.RoomResponse'
        "404":
          description: Sala não encontrada
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Buscar sala por ID
      tags:
      - Room
    patch:
      consumes:
      - application/json
      description: Atualiza os dados de uma sala. Requer ser 'owner' ou 'admin' da
        sala.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Dados atualizados da sala
        in: body
        name: room
        required: true
        schema:
          $ref: '#/definitions/doc_generators.UpdateRoomRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/doc_generators.RoomResponse'
        "400":
          description: Dados inválidos
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Atualizar sala
      tags:
      - Room
  /rooms/{roomID}/join:
    post:
      description: Entra em uma sala pública.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: roomID
        required: true
        type: string
      responses:
        "200":
          description: Entrada bem-sucedida
          schema:
            type: string
        "403":
          description: 'Acesso negado (ex: sala privada)'
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Entrar em uma sala
      tags:
      - Member
  /rooms/{roomID}/members:
    get:
      description: Retorna a lista de usuários em uma sala específica.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: roomID
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/doc_generators.MemberWithUser'
            type: array
      security:
      - CookieAuth: []
      summary: Listar membros da sala
      tags:
      - Member
    post:
      consumes:
      - application/json
      description: Adiciona um usuário a uma sala. Requer ser 'owner' ou 'admin' da
        sala.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: roomID
        required: true
        type: string
      - description: Dados do membro
        in: body
        name: member
        required: true
        schema:
          $ref: '#/definitions/doc_generators.AddMemberRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/doc_generators.MemberWithUser'
        "400":
          description: Dados inválidos
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Adicionar membro à sala
      tags:
      - Member
  /rooms/{roomID}/members/{memberID}:
    delete:
      description: Remove um usuário da sala. Requer ser 'owner'/'admin', ou o próprio
        usuário.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: roomID
        required: true
        type: string
      - description: ID do usuário (UUID)
        format: uuid
        in: path
        name: memberID
        required: true
        type: string
      responses:
        "204":
          description: Removido com sucesso
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Remover membro da sala
      tags:
      - Member
  /rooms/{roomID}/members/{memberID}/role:
    put:
      consumes:
      - application/json
      description: Atualiza o 'role' de um membro na sala. Requer ser 'owner' ou 'admin'.
      parameters:
      - description: ID da sala (UUID)
        format: uuid
        in: path
        name: roomID
        required: true
        type: string
      - description: ID do usuário (UUID)
        format: uuid
        in: path
        name: memberID
        required: true
        type: string
      - description: Novo papel
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/doc_generators.UpdateRoleRequest'
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/doc_generators.MemberWithUser'
      security:
      - CookieAuth, CsrfAuth: []
      summary: Atualizar papel do membro
      tags:
      - Member
  /rooms/mine:
    get:
      description: Retorna todas as salas onde o usuário logado é o proprietário.
      produces:
      - application/json
      responses:
        "200":
          description: Lista de salas
          schema:
            items:
              $ref: '#/definitions/doc_generators.RoomResponse'
            type: array
        "401":
          description: Não autorizado
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Listar minhas salas (criadas por mim)
      tags:
      - Room
  /user:
    post:
      consumes:
      - application/json
      description: Rota pública para registrar um novo usuário no sistema.
      parameters:
      - description: Dados do novo usuário
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/doc_generators.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/doc_generators.UserResponse'
        "400":
          description: Dados inválidos
          schema:
            type: string
      summary: Criar novo usuário (Público)
      tags:
      - User
  /user/me:
    delete:
      description: Realiza um 'soft delete' no usuário autenticado.
      responses:
        "204":
          description: Usuário deletado com sucesso
          schema:
            type: string
        "401":
          description: Não autorizado
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Deletar o usuário logado
      tags:
      - User
    put:
      consumes:
      - application/json
      description: Atualiza o 'username' ou 'picture' do usuário autenticado.
      parameters:
      - description: Dados do usuário para atualizar
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/doc_generators.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/doc_generators.UserResponse'
        "400":
          description: Requisição inválida
          schema:
            type: string
        "401":
          description: Não autorizado
          schema:
            type: string
      security:
      - CookieAuth, CsrfAuth: []
      summary: Atualizar o usuário logado
      tags:
      - User
  /user/rooms:
    get:
      description: Retorna todas as salas das quais o usuário logado é membro.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/doc_generators.RoomResponse'
            type: array
        "401":
          description: Não autorizado
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Listar salas que eu participo
      tags:
      - Room
  /users:
    get:
      description: Rota pública que retorna uma lista de todos os usuários.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/doc_generators.UserResponse'
            type: array
      summary: Listar todos os usuários (Público)
      tags:
      - User
securityDefinitions:
  CookieAuth:
    description: Cookie de autenticação HttpOnly (obtido via /auth/login)
    in: cookie
    name: access_token
    type: apiKey
  CsrfAuth:
    description: Token CSRF (obtido via /auth/login, necessário para POST/PUT/PATCH/DELETE)
    in: header
    name: X-CSRF-TOKEN
    type: apiKey
swagger: "2.0"
